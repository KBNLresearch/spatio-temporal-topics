{% extends "base.html" %}
{% load i18n %}

{% block extrahead %}
    {% load staticfiles %}
   <link rel="stylesheet" href="{% static "css/newstopics.css" %}">
   <script src="{% static "js/newstopics.js" %}"></script>
   <script src="{% static "js/vis.js" %}"></script>
   <script>
        var url_process_query = "{% url "newstopics.views.process_query" %}";
        var url_visualization = "{% url "newstopics.views.visualization" %}";
    </script>    
{% endblock %}

{% block A %}
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
	<a class="navbar-brand">KB News (1914-1940)</a> 

    {% csrf_token %}
    <form action="/simple_search/" method="GET" id="simple_search">
    <div class="navbar-form navbar-left" >
    <div class="input-group">
        <!--Get the search query, and re-fill the inputbox after query being processed -->
        <input type="text" name="q" class="form-control" id="searchbox" placeholder="Search the news" value="{{ simple_search_form.q }}" />
        <span class="input-group-btn">
            <button id="search_submit"  class="btn btn-success" type="submit"> Go
            <!--span class="glyphicon glyphicon-chevron-right"></span-->
            </button>
        </span>
        <span class="advanced_searchbox_info pull-right" id="advanced_option">Advanced search &raquo;</span>
    </div>
    </div>
    </form>

    </nav>
{% endblock %}

{% block B %}
    <!-- advanced search options -->
    <div id="advance_search" class="advanced_searchbox {{advanced_search_status}}">
        <div class="advanced_searchbox_title">
            The articles returned as search results ...
            <span class="advanced_searchbox_info pull-right" id="advanced_searchbox_learn">Learn more &raquo;</span>
        </div>

        <div class="alert alert-info hidden" role="alert" id="advanced_searchbox_info">
            <button type="button" class="close" id="advanced_searchbox_hideinfo">
            <span aria-hidden="true">&times;</span>
            </button>
            <p><strong>How to write complex queries</strong></p> 
            <p>
            <ol>
                <li><p><strong>Exact phrase</strong>: quote the phrase. E.g., "first world war".</p></li>
                <li><p><strong>Wildcard queries</strong>: use * to match any character sequences including the empty one, and ? to match any single character. <br/>E.g., duits*land would match both Duitschland and Duitsland.</p></li>
                <li><p><strong>Term proximity</strong>: use #X(terms) to indicate that a set of query terms should occur within a span of X terms. <br/> E.g., #5(first world war) indicates terms "first", "world", "war" should span at most a length of 5 words.</p></li>
                <li><p><strong>Ordered term proximity</strong>: use #oX(terms) to indicate that query terms should occur within a span of X terms in its exact order. <br/> E.g., #o3(great war) indicates terms "great" and "war" should span at most a length of 3 words, where "great" precedes "war". </p></li>
                
            </ol>
            </p>
        </div>

        <form class="form-horizontal" role="form" action="/advanced_search/" method="GET">
            <div class="form-group">
            <label for="must" class="col-sm-3 control-label">must contain: </label>
            <div class="col-sm-9">
            <input type="text" class="form-control" 
                    id="must" name="must" 
                    value="{{advanced_search_form.must}}"
                    placeholder="Terms that must occur in the article">
            </div>
            </div>

            <div class="form-group">
            <label for="mustnot" class="col-sm-3 control-label">must not contain: </label>
            <div class="col-sm-9">
            <input type="text" class="form-control" 
                    id="mustnot" name="mustnot" 
                    value="{{advanced_search_form.mustnot}}"
                    placeholder="Terms that must not occur in the article">
            </div>
            </div>
            
            <div class="form-group">
            <label for="should" class="col-sm-3 control-label">should contain: </label>
            <div class="col-sm-9">
            <input type="text" class="form-control" 
                    id="should" name="should" 
                    value="{{advanced_search_form.should}}" 
                    placeholder="Terms that should but not necessarily occur in the article">
            </div>
            </div>

            <!-- specify the time periods-->
            <div class="form-group">
            <label for="periods" class="col-sm-3 control-label">in these periods: </label>
            <div class="col-sm-4">
                <input type="text" size="4" maxlength="4" class="space3"
                        id="period_start"
                        value = "{{advanced_search_form.period_start}}"
                        placeholder="1914"> to
                <input type="text" size="4" maxlength="4" class="space3" 
                        id="period_end"
                        value = "{{advanced_search_form.period_end}}"
                        placeholder="1940">
            </div>
            <!--adding a specified period-->
            <div class="col-sm-5">
                <a   
                    class="btn btn-sm btn-primary"
                    id="btn_add_period"
                    >Add this period</a>
            </div>
            </div>

            <!-- error message for improper input-->
            <div class="form-group">
            <div class="col-sm-offset-3 col-sm-9 err-msg" id="period_err">
            </div>
            </div>

            <!--field to catch the specified periods-->
            <div class="form-group">
            <label for="selected_periods" class="col-sm-3 control-label"></label>
            <div class="col-sm-9" id="div_selected_periods">
            </div>
            <input type="hidden" name="periods" id="input_selected_periods"
                    value="{{advanced_searc_form.selected_periods}}"
                    > 
            </div>
            
            <!-- Select newspaepers to be searched-->
            <div class="form-group">
            <label for="newspapers" class="col-sm-3 control-label">in these newspapers: </label>
            <div class="col-sm-9">
                To be implemented
            </div>
            </div>

            <!-- Submit the form -->
            <div class="form-group">
                <div class="col-sm-offset-7 col-sm-5">
                <button type="submit" class="btn btn-success">Search</button>
                <button type="button" class="btn btn-warning">Clear</button>
                </div>
            </div>


        </form> 
    </div>
    <!--Summarize comparison of concept statistics between locations-->
    <div id="vis_loc_summary" class="visualization">
    {% for loc in newsloc %}
    <div id="{{loc|safe}}">
    <div id="vis_composition_{{loc}}"></div>
    </div>
    {% endfor %}
    </div>
{% endblock %}

{% block C %}
    <div id="result_top"></div>
    <div id="resultlist" class="list-group"></div>
    <div id="pagination" class="pull-right"></div>
{% endblock %}
